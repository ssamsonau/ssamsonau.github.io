---
title: "Animation overview"
date: 2017-11-22
category: 
- data science
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = T)
```



Let see what is available for antimation in R

<!--more-->

### General idea

* use saveGIF
* or saveVideo (animation package)
* or use gganimate: [link](https://github.com/dgrtwo/gganimate)

### saveGIF

_General overview with executable examples:_ [link](https://yihui.name/animation/)

_Other Examples here:_

* [link1](https://github.com/tidyverse/ggplot2/wiki/Using-ggplot2-animations-to-demonstrate-several-parallel-numerical-experiments-in-a-single-layout)
* [link2](https://yihui.name/animation/example/savegif/)


Before it will work you need to install one of this:

* ImageMagick ([how to install on MAC](https://encodable.com/install_imagemagick_on_mac_osx/))
* GraphicsMagick ([how ot install GraphicsMagick on Windows](http://www.graphicsmagick.org/INSTALL-windows.html)). In saveGIF function, you have to use option convert = 'gm convert'

```{r}
plot(mtcars)
if(!dir.exists("files/2017-11-22-animation")) dir.create("files/2017-11-22-animation")
if(!dir.exists("files/2017-11-22-animation/movies")) dir.create("files/2017-11-22-animation/movies")
```

```{r}
library(animation)
library(ggplot2)
  
saveGIF({
    for (i in 1:10) 
      plot(runif(10), ylim = 0:1)
        }, 
        convert = 'gm convert', 
        movie.name = "files/2017-11-22-animation/test1.gif")
```

```{r}
saveGIF({
        brownian.motion(pch = 21, cex = 5, 
        col = "red", bg = "yellow")
        }, 
        movie.name = "files/2017-11-22-animation/movies/brownian_motion2.gif", 
        interval = runif(30, 0.01, 1), 
        nmax = 30, convert = 'gm convert')
```

_Note:_ N of steps, is controled by nmax in saveGIF does this. Alternativelly, change in globally with
ani.options("nmax" = 50)

##### Example with brownian.motion 

Look at function brownian.motion and create your own by analog
See code iside function

```{r}
brownian.motion
```


Make your own


```{r}
my_plot <- function(){for(i in 1:10) plot(runif(10), ylim = 0:1)}
  
saveGIF({
  my_plot()
}, movie.name = "files/2017-11-22-animation/movies/example2.gif", 
   convert = 'gm convert')

library(tidyverse)
mtcars <- mtcars %>% 
  arrange(mpg)
my_plot_2 <- function(){
  for(i in 1:nrow(mtcars)){
      ggplot(mtcars[i, ], aes(x = mpg, y = hp))  +
        geom_point() +
        xlim(range(mtcars[, "mpg"])) +
        ylim(range(mtcars[, "hp"]))
  }
}
  
saveGIF({
  my_plot_2()
}, movie.name = "files/2017-11-22-animation/movies/example_mtcars.gif", 
   convert = 'gm convert')
```


### Animation package

#### Save html

example from [here](https://yihui.name/animation/example/savehtml/)

```{r, eval=F}
current_wd <- getwd()
if(!dir.exists("files/2017-11-22-animation/movies/html")) dir.create("files/2017-11-22-animation/movies/html")
    
setwd("files/2017-11-22-animation/movies/html")

des = c("When you write a long long long long description, R will try to wrap the", 
        "words automatically.", "Oh, really?!")
saveHTML({
  par(mar = c(4, 4, 0.5, 0.5))
  ani.options(interval = 0.5)
  for (i in 1:10) {
    plot(rnorm(50), ylim = c(-3, 3))
    ani.pause()
  }
}, img.name = "norm_plot", single.opts = "utf8: false", autoplay = FALSE, 
interval = 0.5, imgdir = "norm_dir", htmlfile = "random.html", 
ani.height = 400, ani.width = 600, title = "Demo of 50 Normal random numbers", 
description = des)
  
setwd(current_wd)
```



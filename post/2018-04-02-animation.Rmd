---
title: Animation Overview
date: '2017-04-02'
slug: animation-overview
tags: [data science, R]
description: "A short review of some methods allowing to create animations in R is presented bellow. "
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = T, warning = F, message = F)
```


A short review of some methods allowing to create animations in R is presented bellow. 

<!--more-->

## Available options

* library(animation)
    * [saveGIF](https://yihui.name/animation/example/savegif/) (relies on ImageMagick or GraphicsMagick)
    * [saveVideo](https://yihui.name/animation/example/savevideo/)
    * [saveMovie](https://github.com/tidyverse/ggplot2/wiki/Using-ggplot2-animations-to-demonstrate-several-parallel-numerical-experiments-in-a-single-layout)
    * [saveHTML](https://yihui.name/animation/example/savehtml/)
    * [other functions here](https://cran.r-project.org/web/packages/animation/animation.pdf)
  
* [magick package](https://cran.r-project.org/web/packages/magick/vignettes/intro.html#animation) for ImageMagick use in R

* [gganimate](https://github.com/dgrtwo/gganimate)
    * additional use of package [tweenr](http://blog.revolutionanalytics.com/2017/05/tweenr.html) makes a result smother

* [animated maps](https://ryanpeek.github.io/2016-10-19-animated-gif_maps_in_R/)

* [write.gif from caTools](https://www.rdocumentation.org/packages/caTools/versions/1.2/topics/GIF) from matrix of data or 3D array directly to gif file

### saveGIF

saveGIF requires to for ImageMagick or GraphicsMagick to be installed. 

* ImageMagick ([how to install on MAC](https://encodable.com/install_imagemagick_on_mac_osx/))
* GraphicsMagick ([how ot install GraphicsMagick on Windows](http://www.graphicsmagick.org/INSTALL-windows.html)).    
In saveGIF function, you have to use option convert = 'gm convert'
* alternativelly, one can use installr::install.ImageMagick() 

#### Example

```{r, echo=T}
if(!dir.exists("movies"))
  dir.create("movies")

file_path_for_gif <- "movies/example.gif"
```

Now you can just use a code bellow. Replace a plot() function by the ploting funciton you need.
Options for gif file can be specified using ani.options(). 

```{r, results=T, cache=T}
my_plot <- function() {
  for (i in 1:10){
    plot(runif(10), ylim = 0:1)
  }
}

library(animation)
# ?ani.options
# animations options - set up globaly
ani.options(interval = 0.5, nmax = 50, ani.width = 300, ani.height = 300)

saveGIF({
    my_plot()
  }, 
  movie.name = file_path_for_gif,
  convert = 'gm convert',
  # animation options can be specified locally as well
  nmax = 40 
)

knitr::include_graphics(file_path_for_gif)
```


### write.gif (from caTools)

Let say we have a 3D array in variable df_array 1000x1000x600 (600 frames).

```{r, eval=F}
library(caTools)
write.gif(df_array, 
          filename = "examples/test_all_rainbow.gif", 
          col=rainbow(256)
          )

```

